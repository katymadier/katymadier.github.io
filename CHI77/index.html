<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>Together Chicago CHI77 prototype</title>

  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script src="resources/js/vue.min.js"></script>
  <script src="resources/js/leaflet-heat.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>

<body>
  <div id="side-nav">
    <div class="heading">
      <h1>CHI77</h1>
      <h2>by Together Chicago</h2>
      <h3>Chicago's 77 neighborhoods as seen through data.</h3>
    </div>
    <div id="controls" class="nicebox">
      <div>
        <select id="census-variable">
          <option id="all_btn"onclick="dropDown()">All</option>
          <option id="crime_btn" onclick="dropDown()">Crime in Chicago</option>
          <option id="school_btn" onclick="dropDown()">School Scores</option>
          <option id="grocery_btn" onclick="dropDown()">Grocery Stores</option>
      </select>
      </div>
      <div id="legend">
        <div id="census-min">min</div>
        <div class="color-key"><span id="data-caret">&#x25c6;</span></div>
        <div id="census-max">max</div>
      </div>
    </div>
    <div id="data-box" class="nicebox">
      <label id="data-label" for="data-value"></label>
      <span id="data-value"></span>
    </div>
  </div>
  <div id="map"></div>
  <div class="footer">
    <p>more text for the bottom</p>
  </div>

  <script>

    var map = L.map('map').setView([41.81, -87.6298], 11);

    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="http://osm.org/copyright">Together Chicago</a> contributors'
    }).addTo(map);

    function addDataToMap(data, map) {
        var dataLayer = L.geoJson(data);
        dataLayer.addTo(map);
    }

    $.getJSON("resources/data/Chicago_Zip_Code_and_Neighborhood_Map.geojson", function(data) { addDataToMap(data, map); });

    function addDataToMap(data, map) {
        var dataLayer = L.geoJson(data, {
            onEachFeature: function(feature, layer) {
                var popupText = "Neighborhood: " + feature.properties.objectid
                    + "<br>zipcode: " + feature.properties.zip
                    + "<br><a href='" + feature.properties.url + "'>More info</a>";
                layer.bindPopup(popupText); }
            });
        dataLayer.addTo(map);
    }

  </script>
</body>

</html>
